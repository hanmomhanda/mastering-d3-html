!function(){var windmill={version:"0.3.3"};windmill.svg={},windmill.svg.translate=function(dx,dy){return"translate("+[dx,dy]+")"},windmill.svg.scale=function(sx,sy){return arguments.length<2&&(sy=sx),"scale("+[sx,sy]+")"},windmill.chart={},windmill.chart.heatmap=function(){"use strict";function chart(selection){selection.each(function(data){var div=d3.select(this),svg=div.selectAll("svg").data([data]).enter().append("svg").call(chart.svgInit),margin=chart.margin(),width=chart.width()-margin.left-margin.right,height=chart.height()-margin.top-margin.bottom,row=chart.row(),col=chart.column(),val=chart.value(),gchart=svg.select("g.chart"),xScale=d3.scale.ordinal().domain(data.map(col)).rangeBands([0,width]),yScale=d3.scale.ordinal().domain(data.map(row)).rangeBands([0,height]),cScale=d3.scale.linear().domain(d3.extent(data,val)).range(chart.colorExtent()),rect=gchart.selectAll("rect").data(data).enter().append("rect");rect.attr("width",xScale.rangeBand()).attr("height",yScale.rangeBand()).attr("x",function(d){return xScale(col(d))}).attr("y",function(d){return yScale(row(d))}).attr("fill",function(d){return cScale(val(d))});var xAxis=d3.svg.axis().scale(xScale).orient("bottom");svg.select("g.xaxis").call(xAxis);var yAxis=d3.svg.axis().scale(yScale).orient("left");svg.select("g.yaxis").call(yAxis)})}function createAccessor(attr){function accessor(value){return arguments.length?(attributes[attr]=value,chart):attributes[attr]}return accessor}var attributes={width:600,height:300,margin:{top:20,right:20,bottom:40,left:40},colorExtent:["#000","#aaa"],value:function(d){return d.value},row:function(d){return d.row},column:function(d){return d.column}};chart.svgInit=function(svg){var margin=chart.margin(),height=(chart.width()-margin.left-margin.right,chart.height()-margin.top-margin.bottom),translate=windmill.svg.translate;svg.attr("width",chart.width()).attr("height",chart.height()),svg.append("g").attr("class","chart").attr("transform",translate(margin.left,margin.top)),svg.append("g").attr("class","axis xaxis").attr("transform",translate(margin.left,margin.top+height)),svg.append("g").attr("class","axis yaxis").attr("transform",translate(margin.left,margin.top))};for(var attr in attributes)!chart[attr]&&attributes.hasOwnProperty(attr)&&(chart[attr]=createAccessor(attr));return chart},windmill.layout={},windmill.layout.matrix=function(){"use strict";function layout(data){var row,col,val,groupedData=[],found=!1;return data.forEach(function(d){row=attributes.row(d),col=attributes.column(d),val=attributes.value(d),found=!1,groupedData.forEach(function(item){item.row===row&&item.col===col&&(item.values.push(val),found=!0)}),found||groupedData.push({row:row,col:col,values:[val]})}),groupedData.forEach(function(d){d.value=attributes.aggregate(d.values),delete d.values}),groupedData}function createAccessor(attr){function accessor(value){return arguments.length?(attributes[attr]=value,layout):attributes[attr]}return accessor}var attributes={row:function(d){return d.row},column:function(d){return d.column},value:function(d){return d.value},aggregate:function(values){var sum=0;return values.forEach(function(d){sum+=d}),sum}};for(var attr in attributes)!layout[attr]&&attributes.hasOwnProperty(attr)&&(layout[attr]=createAccessor(attr));return layout},"object"==typeof module&&module.exports?(this.d3=require("d3"),module.exports=windmill):window.windmill=windmill}();